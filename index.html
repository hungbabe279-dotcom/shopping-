<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CD list</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="wrap">
    <h1 class="title">CD list</h1>
    <table class="cd-table">
      <thead>
        <tr>
          <th class="desc">Description</th>
          <th class="price">Price</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>86 (the band) - True Life Songs and Pictures</td>
          <td class="price-cell">$14.95</td>
          <td class="btn-cell"><button class="add" data-id="cd1" data-price="14.95" data-desc="86 (the band) - True Life Songs and Pictures">Add To Cart</button></td>
        </tr>
        <tr>
          <td>Paddlefoot - The first CD</td>
          <td class="price-cell">$12.95</td>
          <td class="btn-cell"><button class="add" data-id="cd2" data-price="12.95" data-desc="Paddlefoot - The first CD">Add To Cart</button></td>
        </tr>
        <tr>
          <td>Paddlefoot - The second CD</td>
          <td class="price-cell">$14.95</td>
          <td class="btn-cell"><button class="add" data-id="cd3" data-price="14.95" data-desc="Paddlefoot - The second CD">Add To Cart</button></td>
        </tr>
        <tr>
          <td>Joe Rut - Genuine Wood Grained Finish</td>
          <td class="price-cell">$14.95</td>
          <td class="btn-cell"><button class="add" data-id="cd4" data-price="14.95" data-desc="Joe Rut - Genuine Wood Grained Finish">Add To Cart</button></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div id="added-msg" aria-live="polite" style="position:fixed;right:18px;bottom:18px;background:#0b7a73;color:#fff;padding:10px 14px;border-radius:6px;display:none;box-shadow:0 2px 6px rgba(0,0,0,.15)">Added to cart</div>
  <script>
    // Attach handlers to Add To Cart buttons and store cart in localStorage
    (function(){
      function getCart(){
        try{ return JSON.parse(localStorage.getItem('simple_cart')||'{}'); }catch(e){return{} }
      }
      function saveCart(c){ localStorage.setItem('simple_cart', JSON.stringify(c)); }
      function showMsg(){ const el=document.getElementById('added-msg'); el.style.display='block'; setTimeout(()=>el.style.display='none',1200);} 
      document.querySelectorAll('button.add').forEach(btn=>{
        btn.addEventListener('click', function(){
          const id=this.dataset.id; const price=parseFloat(this.dataset.price); const desc=this.dataset.desc;
          const cart=getCart();
          if(!cart[id]) cart[id]={id:id,desc:desc,price:price,qty:0};
          cart[id].qty = (cart[id].qty||0) + 1;
          saveCart(cart);
          showMsg();
        });
      });
    })();
  </script>
</body>
</html>
